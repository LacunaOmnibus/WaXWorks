<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>MyApp::Model::SearchIndex - A searchable document index</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<ul>

		<li><a href="#constructor___new">CONSTRUCTOR - new</a></li>
		<li><a href="#add_docs">add_docs</a></li>
		<li><a href="#add_field">add_field</a></li>
		<li><a href="#delete_field">delete_field</a></li>
		<li><a href="#get_clean_indexer">get_clean_indexer</a></li>
		<li><a href="#get_indexer">get_indexer</a></li>
		<li><a href="#list_fields">list_fields</a></li>
		<li><a href="#replace_docs">replace_docs</a></li>
	</ul>

</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>MyApp::Model::SearchIndex - A searchable document index</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
 <span class="comment">### Directory will be created if it does not already exist.</span>
 <span class="variable">$idx</span> <span class="operator">=</span> <span class="variable">MyApp::Model::SearchIndex</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span>
  <span class="string">index_directory</span> <span class="operator">=&gt;</span> <span class="string">'/path/to/index/directory'</span>
 <span class="operator">);</span>
</pre>
<pre>
 <span class="variable">$idx</span><span class="operator">-&gt;</span><span class="variable">add_field</span><span class="operator">(</span><span class="string">'summary'</span><span class="operator">);</span>
 <span class="variable">$idx</span><span class="operator">-&gt;</span><span class="variable">delete_field</span><span class="operator">(</span><span class="string">'title'</span><span class="operator">);</span>
</pre>
<pre>
 <span class="variable">$document</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
    <span class="string">summary</span> <span class="operator">=&gt;</span> <span class="string">'This is a...'</span><span class="operator">,</span>
    <span class="string">content</span> <span class="operator">=&gt;</span> <span class="string">'This is an example document content'</span><span class="operator">,</span>
 <span class="operator">}</span><span class="operator">;</span>
 <span class="variable">$idx</span><span class="operator">-&gt;</span><span class="variable">add_docs</span><span class="operator">(</span><span class="operator">[</span> <span class="variable">$document</span> <span class="operator">]</span><span class="operator">);</span>
</pre>
<pre>
 <span class="variable">$another_document</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
    <span class="string">summary</span> <span class="operator">=&gt;</span> <span class="string">'This is a...'</span><span class="operator">,</span>
    <span class="string">content</span> <span class="operator">=&gt;</span> <span class="string">'This is another example document content'</span><span class="operator">,</span>
 <span class="operator">}</span><span class="operator">;</span>
 <span class="variable">$yet_another_document</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
    <span class="string">summary</span> <span class="operator">=&gt;</span> <span class="string">'This is a...'</span><span class="operator">,</span>
    <span class="string">content</span> <span class="operator">=&gt;</span> <span class="string">'This is yet another example document content'</span><span class="operator">,</span>
 <span class="operator">}</span><span class="operator">;</span>
 <span class="variable">$idx</span><span class="operator">-&gt;</span><span class="variable">add_docs</span><span class="operator">(</span><span class="operator">[</span> <span class="variable">$another_document</span><span class="operator">,</span> <span class="variable">$yet_another_document</span> <span class="operator">]</span><span class="operator">);</span>
</pre>
<p>The index now contains three documents.</p>
<pre>
 <span class="variable">$new_document</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
    <span class="string">summary</span> <span class="operator">=&gt;</span> <span class="string">'This is a...'</span><span class="operator">,</span>
    <span class="string">content</span> <span class="operator">=&gt;</span> <span class="string">'This is a brand new document content to overwrite the previous.'</span><span class="operator">,</span>
 <span class="operator">}</span><span class="operator">;</span>
 <span class="variable">$idx</span><span class="operator">-&gt;</span><span class="variable">replace_docs</span><span class="operator">(</span><span class="operator">[</span> <span class="variable">$new_document</span> <span class="operator">]</span><span class="operator">);</span>
</pre>
<p>The index now contains only one document.</p>
<pre>
 <span class="variable">$hits</span> <span class="operator">=</span> <span class="variable">$idx</span><span class="operator">-&gt;</span><span class="variable">searcher</span><span class="operator">-&gt;</span><span class="variable">hits</span><span class="operator">(</span> <span class="string">query</span> <span class="operator">=&gt;</span> <span class="string">'brand new'</span> <span class="operator">);</span>
 <span class="keyword">while</span><span class="operator">(</span> <span class="keyword">my</span> <span class="variable">$h</span> <span class="operator">=</span> <span class="variable">$hits</span><span class="operator">-&gt;</span><span class="variable">next</span> <span class="operator">)</span> <span class="operator">{</span>
    <span class="keyword">say</span> <span class="variable">$h</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">'summary'</span><span class="operator">}</span><span class="operator">;</span>    <span class="comment"># 'This is a...',</span>
    <span class="keyword">say</span> <span class="variable">$h</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">'content'</span><span class="operator">}</span><span class="operator">;</span>    <span class="comment"># 'This is a brand new document content to overwrite the previous.',</span>
 <span class="operator">}</span>
</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Creates and searches a <em>Lucy</em> document index.</p>
<p>
</p>
<hr />
<h1><a name="methods">METHODS</a></h1>
<p>
</p>
<h2><a name="constructor___new">CONSTRUCTOR - new</a></h2>
<ul>
<li><strong><a name="args" class="item">ARGS</a></strong>

<ul>
<li><strong><a name="hash" class="item">hash</a></strong>

<ul>
<li><strong><a name="index_directory_path_to_directory" class="item"><code>index_directory =&gt; '/path/to/directory'</code></a></strong>

</li>
</ul>
</li>
</ul>
</li>
<li><strong><a name="returns" class="item">RETURNS</a></strong>

<ul>
<li><strong><a name="myapp_model_searchableindex_object" class="item">MyApp::Model::SearchableIndex object</a></strong>

</li>
</ul>
</li>
</ul>
<p>The <code>index_directory</code> will be created if it does not already exist, and will 
contain the document index.</p>
<p>
</p>
<h2><a name="add_docs">add_docs</a></h2>
<ul>
<li><strong><a name="args2" class="item">ARGS</a></strong>

<ul>
<li><strong><a name="arrayref_of_files_to_be_added_to_the_existing_index" class="item">arrayref - of files to be <em>added to the existing index</em></a></strong>

</li>
</ul>
</li>
<li><strong><a name="returns2" class="item">RETURNS</a></strong>

<ul>
<li><strong><a name="nothing" class="item">nothing</a></strong>

</li>
</ul>
</li>
</ul>
<p>See also <a href="#replace_docs">replace_docs</a>.</p>
<p>
</p>
<h2><a name="add_field">add_field</a></h2>
<ul>
<li><strong><a name="args3" class="item">ARGS</a></strong>

<ul>
<li><strong><a name="scalar_name_of_the_field_to_add" class="item">scalar - name of the field to add</a></strong>

</li>
</ul>
</li>
<li><strong><a name="returns3" class="item">RETURNS</a></strong>

<ul>
<li><strong>nothing</strong>

</li>
</ul>
</li>
</ul>
<p>Adds a field to the schema.</p>
<p>
</p>
<h2><a name="delete_field">delete_field</a></h2>
<ul>
<li><strong><a name="args4" class="item">ARGS</a></strong>

<ul>
<li><strong><a name="scalar_field_to_be_deleted" class="item">scalar - field to be deleted</a></strong>

</li>
</ul>
</li>
<li><strong><a name="returns4" class="item">RETURNS</a></strong>

<ul>
<li><strong>nothing</strong>

</li>
</ul>
</li>
</ul>
<p>Removes a field from the schema</p>
<p>
</p>
<h2><a name="get_clean_indexer">get_clean_indexer</a></h2>
<ul>
<li><strong><a name="args5" class="item">ARGS</a></strong>

<ul>
<li><strong>nothing</strong>

</li>
</ul>
</li>
<li><strong><a name="returns5" class="item">RETURNS</a></strong>

<ul>
<li><strong><a name="lucy_index_indexer_object" class="item">Lucy::Index::Indexer object</a></strong>

</li>
</ul>
</li>
</ul>
<p>Returns a <a href="/Lucy/Index/Indexer.html">the Lucy::Index::Indexer manpage</a> object <em>pointing to a clean index</em>.  This 
means that the document index (pointed to by <a href="#index_directory">index_directory</a>) will be 
<em>completely cleared of all of its content</em>!</p>
<p>So only use this when you're about to fully re-create your index.  See 
<a href="#get_indexer">get_indexer</a> to non-destructively get an indexer.</p>
<p>
</p>
<h2><a name="get_indexer">get_indexer</a></h2>
<ul>
<li><strong><a name="args6" class="item">ARGS</a></strong>

<ul>
<li>
</li>
</ul>
</li>
<li><strong><a name="returns6" class="item">RETURNS</a></strong>

<ul>
<li><strong><a name="lucy_index_indexer_object2" class="item">Lucy::Index::Indexer object</a></strong>

</li>
</ul>
</li>
</ul>
<p>Returns a <a href="/Lucy/Index/Indexer.html">the Lucy::Index::Indexer manpage</a> object.  Points to the existing 
<a href="#index_directory">index_directory</a> without cleaning it out first.</p>
<p>
</p>
<h2><a name="list_fields">list_fields</a></h2>
<ul>
<li><strong><a name="args7" class="item">ARGS</a></strong>

<ul>
<li><strong>nothing</strong>

</li>
</ul>
</li>
<li><strong><a name="returns7" class="item">RETURNS</a></strong>

<ul>
<li><strong><a name="list_names_of_the_fields_that_have_so_far_been_added_to_the_schema" class="item">list - Names of the fields that have so far been added to the schema.</a></strong>

</li>
</ul>
</li>
</ul>
<p>
</p>
<h2><a name="replace_docs">replace_docs</a></h2>
<ul>
<li><strong><a name="args8" class="item">ARGS</a></strong>

<ul>
<li><strong><a name="arrayref_files_to_be_inserted_into_a_new_clean_index_destroying_any_already_existing_documents" class="item">arrayref - files to be <em>inserted into a new, clean index, destroying 
any already-existing documents</em></a></strong>

</li>
</ul>
</li>
<li><strong><a name="returns8" class="item">RETURNS</a></strong>

<ul>
<li><strong>nothing</strong>

</li>
</ul>
</li>
</ul>
<p>See also <a href="#add_docs">add_docs</a></p>

</body>

</html>
